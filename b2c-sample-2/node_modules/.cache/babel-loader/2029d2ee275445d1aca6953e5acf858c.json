{"ast":null,"code":"/*! @azure/msal-common v4.5.0 2021-07-22 */\n'use strict';\n\nimport { Constants as Constants$1, Separators } from '../utils/Constants.js';\nimport { ClientAuthError as ClientAuthError$1 } from '../error/ClientAuthError.js';\nimport { StringUtils as StringUtils$1 } from '../utils/StringUtils.js';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\n/**\r\n * Function to build a client info object from server clientInfo string\r\n * @param rawClientInfo\r\n * @param crypto\r\n */\nfunction buildClientInfo(rawClientInfo, crypto) {\n  if (StringUtils$1.isEmpty(rawClientInfo)) {\n    throw ClientAuthError$1.createClientInfoEmptyError();\n  }\n  try {\n    var decodedClientInfo = crypto.base64Decode(rawClientInfo);\n    return JSON.parse(decodedClientInfo);\n  } catch (e) {\n    throw ClientAuthError$1.createClientInfoDecodingError(e);\n  }\n}\n/**\r\n * Function to build a client info object from cached homeAccountId string\r\n * @param homeAccountId\r\n */\nfunction buildClientInfoFromHomeAccountId(homeAccountId) {\n  if (StringUtils$1.isEmpty(homeAccountId)) {\n    throw ClientAuthError$1.createClientInfoDecodingError(\"Home account ID was empty.\");\n  }\n  var clientInfoParts = homeAccountId.split(Separators.CLIENT_INFO_SEPARATOR, 2);\n  return {\n    uid: clientInfoParts[0],\n    utid: clientInfoParts.length < 2 ? Constants$1.EMPTY_STRING : clientInfoParts[1]\n  };\n}\nexport { buildClientInfo, buildClientInfoFromHomeAccountId };","map":{"version":3,"mappings":";;;;;;;AAAA;;;;AAkBA;;;;;SAKgBA,eAAe,CAACC,aAAqB,EAAEC,MAAe;EAClE,IAAIC,aAAW,CAACC,OAAO,CAACH,aAAa,CAAC,EAAE;IACpC,MAAMI,iBAAe,CAACC,0BAA0B,EAAE;;EAGtD,IAAI;IACA,IAAMC,iBAAiB,GAAWL,MAAM,CAACM,YAAY,CAACP,aAAa,CAAC;IACpE,OAAOQ,IAAI,CAACC,KAAK,CAACH,iBAAiB,CAAe;GACrD,CAAC,OAAOI,CAAC,EAAE;IACR,MAAMN,iBAAe,CAACO,6BAA6B,CAACD,CAAC,CAAC;;AAE9D;AAEA;;;;SAIgBE,gCAAgC,CAACC,aAAqB;EAClE,IAAIX,aAAW,CAACC,OAAO,CAACU,aAAa,CAAC,EAAE;IACpC,MAAMT,iBAAe,CAACO,6BAA6B,CAAC,4BAA4B,CAAC;;EAErF,IAAMG,eAAe,GAAaD,aAAa,CAACE,KAAK,CAACC,UAAU,CAACC,qBAAqB,EAAE,CAAC,CAAC;EAC1F,OAAO;IACHC,GAAG,EAAEJ,eAAe,CAAC,CAAC,CAAC;IACvBK,IAAI,EAAEL,eAAe,CAACM,MAAM,GAAG,CAAC,GAAGC,WAAS,CAACC,YAAY,GAAGR,eAAe,CAAC,CAAC;GAChF;AACL","names":["buildClientInfo","rawClientInfo","crypto","StringUtils","isEmpty","ClientAuthError","createClientInfoEmptyError","decodedClientInfo","base64Decode","JSON","parse","e","createClientInfoDecodingError","buildClientInfoFromHomeAccountId","homeAccountId","clientInfoParts","split","Separators","CLIENT_INFO_SEPARATOR","uid","utid","length","Constants","EMPTY_STRING"],"sources":["../../src/account/ClientInfo.ts"],"sourcesContent":["/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport { ClientAuthError } from \"../error/ClientAuthError\";\r\nimport { StringUtils } from \"../utils/StringUtils\";\r\nimport { ICrypto } from \"../crypto/ICrypto\";\r\nimport { Separators, Constants } from \"../utils/Constants\";\r\n\r\n/**\r\n * Client info object which consists of two IDs. Need to add more info here.\r\n */\r\nexport type ClientInfo = {\r\n    uid: string,\r\n    utid: string\r\n};\r\n\r\n/**\r\n * Function to build a client info object from server clientInfo string\r\n * @param rawClientInfo\r\n * @param crypto\r\n */\r\nexport function buildClientInfo(rawClientInfo: string, crypto: ICrypto): ClientInfo {\r\n    if (StringUtils.isEmpty(rawClientInfo)) {\r\n        throw ClientAuthError.createClientInfoEmptyError();\r\n    }\r\n\r\n    try {\r\n        const decodedClientInfo: string = crypto.base64Decode(rawClientInfo);\r\n        return JSON.parse(decodedClientInfo) as ClientInfo;\r\n    } catch (e) {\r\n        throw ClientAuthError.createClientInfoDecodingError(e);\r\n    }\r\n}\r\n\r\n/**\r\n * Function to build a client info object from cached homeAccountId string\r\n * @param homeAccountId \r\n */\r\nexport function buildClientInfoFromHomeAccountId(homeAccountId: string): ClientInfo {\r\n    if (StringUtils.isEmpty(homeAccountId)) {\r\n        throw ClientAuthError.createClientInfoDecodingError(\"Home account ID was empty.\");\r\n    }\r\n    const clientInfoParts: string[] = homeAccountId.split(Separators.CLIENT_INFO_SEPARATOR, 2);\r\n    return {\r\n        uid: clientInfoParts[0],\r\n        utid: clientInfoParts.length < 2 ? Constants.EMPTY_STRING : clientInfoParts[1]\r\n    };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}